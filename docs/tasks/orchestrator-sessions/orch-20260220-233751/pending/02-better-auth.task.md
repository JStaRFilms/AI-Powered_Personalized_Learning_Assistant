# Task: Authentication (FR-001)

**Session ID:** `orch-20260220-233751`
**Source:** Orchestrator
**Context:** Initial build phase for AI-Powered Personalized Learning Assistant MVP
**Priority:** P0 (Critical Foundation)
**Dependencies:** `01-scaffold-db.task.md` (Must complete first)
**Created At:** 2026-02-20T23:37:51Z

---

## ğŸ”§ Agent Setup (DO THIS FIRST)

### 1. Prime Agent Context
> **MANDATORY:** Run `/vibe-primeAgent` first to load project Coding Guidelines from `docs/Coding_Guidelines.md`

### 2. Workflow to Follow
> **Load:** `cat .agent/workflows/vibe-build.md`
> 
> This is the core implementation workflow. Follow its verification gates.

### 3. Required Skills
| Skill | Path | Why Required |
|-------|------|--------------|
| `nextjs-standards` | `~/.kilocode/skills/nextjs-standards/SKILL.md` | Next.js architecture, middleware patterns, Server Actions |

### 4. Reference Documents
| Document | Path | Purpose |
|----------|------|---------|
| FR-001 | `docs/issues/FR-001.md` | Authentication requirements |
| Core Architecture | `docs/features/CoreArchitecture.md` | User model and session structure |
| Coding Guidelines | `docs/Coding_Guidelines.md` | Project standards |
| Auth Mockup | `docs/mockups/auth.html` | Visual reference for auth UI |

---

## ğŸ“‹ Objective
Implement robust authentication and session management using `better-auth`. Map the authentication layer to the Neon database via Prisma.

## ğŸ¯ Scope

**In Scope:**
- Install `better-auth` package
- Configure `lib/auth.ts` for server/client `better-auth` instances
- Set up Prisma Postgres adapter for User session mapping
- Scaffold Next.js Middleware to protect routes (`/dashboard`, `/chat`, `/library`)
- Create functional Login/SignUp forms styled per design system
- Update Prisma schema with `better-auth` required tables

**Out of Scope:**
- OAuth providers (Google, GitHub) - future enhancement
- Password reset flow - future enhancement
- Email verification - future enhancement

## ğŸ“š Context
See FR-001 in `docs/issues/FR-001.md`. This is required before any user-specific data (like uploaded documents or topic mastery strings) can be tracked properly. Security and session cookie handling are paramount. Neon uses standard PostgreSQL connectors for Prisma.

---

## âœ… Definition of Done
- [ ] Authentication works via Email/Password
- [ ] Prisma schema incorporates necessary tables required by `better-auth`
- [ ] Users can successfully register, log in, and sign out
- [ ] Session record is created in database on login
- [ ] Middleware correctly routes unauthenticated users away from protected areas
- [ ] Auth UI matches design system from `docs/mockups/auth.html`

## ğŸ“ Expected Artifacts
| File | Purpose |
|------|---------|
| `lib/auth.ts` | Server and client auth configuration |
| `lib/auth-client.ts` | Client-side auth hooks |
| `middleware.ts` | Route protection |
| `app/(auth)/login/page.tsx` | Login page |
| `app/(auth)/signup/page.tsx` | Registration page |
| `prisma/schema.prisma` | Updated with auth tables |

## ğŸš« Constraints
- ONLY perform the work outlined above
- Do NOT implement OAuth or password reset
- Do NOT deviate from the specified scope
- Signal completion using `attempt_completion` tool
- Create `02-better-auth.result.md` file in `docs/tasks/orchestrator-sessions/orch-20260220-233751/completed/` when complete

---

*Generated by vibe-orchestrator mode*
